---
description: 
globs: 
alwaysApply: true
---
1. Core Language & Framework
• **Next.js 14 (React 18 + App Router, TypeScript “strict”)**
– Hybrid SSR/ISR, API route handlers, server actions.
2. UI & Styling
• **Tailwind CSS v3** – utility-first styling, theme tokens.
• **shadcn/ui** – Radix-powered components.
• **Fonts** – Radley (display), Inter (body) via @next/font.
• **Colour Palette** – brand hex tokens in tailwind.config.js.
3. Auth & Data Layer
• **Supabase (PostgreSQL + Auth + Realtime)**
– Google • GitHub • email/password OAuth
    
    – Tables: products, inventory, cart_items, orders, order_items, staking_events
    
    – Row-Level Security, realtime channels for inventory / order status.
    
4. Form & Validation
• **react-hook-form** + **Zod** – type-safe client validation.
5. Payments
• **NowPayments** (crypto invoices) – ETH & USDC hosted checkout, HMAC webhook.
• **Stripe Checkout** (card fallback) – PCI-safe, uses same webhook pipeline.
6. Fulfilment (MVP = manual)
• **Printify dashboard** – founders create POD orders by hand, paste IDs.
7. E-mail & Notifications
• **SendGrid (or Resend)** – order confirmed, shipped, ops alert templates.
8. Hosting & DevOps
• **Vercel** – prod & preview deploys, env secrets.
• **GitHub Actions** – lint → type-check → `next build` → preview URL.
9. Cron & Automation
• **Vercel Cron** – weekly GDPR purge job.
• **Manual USDC→HYPE staking** – ops swap & stake, then POST /admin/stake-hype.
10. Observability
• **Plausible Analytics** – privacy-friendly traffic + funnel.
• **Vercel Logs** / **Supabase Logs** – webhook/API error monitoring.
11. Security Essentials
• HMAC verification for NowPayments; Stripe signature check.
    
    • HTTPS enforced, SameSite=lax cookies, Helmet headers.
    
    • Supabase RLS guards user rows; admin routes double-checked by `role = owner`.
    
12. Local Tooling
• **pnpm** package manager – speed & workspace features.
    
    • **ESLint + Prettier**              – pre-commit via Husky.
    
    • **Jest + React Testing Library**   – unit tests.
    
    • **Playwright** (mini smoke)        – add-to-cart → checkout redirect.
    

──────────────────────────────────────────────────────────────────────────────
ENV VARS TEMPLATE
NOWPAYMENTS_KEY=
NOWPAYMENTS_IPN_SECRET=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE=
SENDGRID_API_KEY=
ADMIN_EMAIL_OPS=